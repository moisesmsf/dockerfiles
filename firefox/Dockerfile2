FROM debian:buster-slim

RUN apt update && apt install -y --no-install-recommends firefox-esr apulse && rm -rf /var/lib/apt/lists/*

ARG LANG=$LANG#

ARG UID=${UID}

ARG HOME=${HOME}

ARG USER=${USER}

ENV HOME=${HOME}

ENV USER=${USER}

ENV UID=${UID}

ENV LANG=${LANG}

RUN mkdir -p $HOME

RUN useradd -m $USER

COPY local.conf /etc/fonts/local.conf

#RUN echo 'pref("browser.tabs.remote.autostart", false);' >> /etc/firefox/syspref.js

COPY entrypoint.sh /usr/bin/startfirefox

RUN chmod +x /usr/bin/startfirefox

USER $USER

ENTRYPOINT [ "/usr/bin/startfirefox" ]
